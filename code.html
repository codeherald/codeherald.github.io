
Topic: JavaScript Timing Event - Creating Your Own Stop Watch	1.0

Author :  Musa John


<p style="margin: 10px auto;" >Javascript stop down timer can be implemented using the javascript timing methods which are executed in time interval.</p>

<p style="margin: 10px auto;">Javascript timing methods automate a particular task to be done on the fly without you having to click a button or call an event.</p>

<p style="width:auto;margin: 10px auto;"> Javascript timing is made up of two key methods:</p>

<p style="margin: 10px auto; padding:5px; border: 1px solid #ccc; display: block;background: #fbfbfb;" class="jsName">setTimeout( "javascript expression", milliseconds );</p>

<p style="margin: 10px auto; padding:5px; border: 1px solid #ccc; display: block;background: #fbfbfb;" class="jsName"> clearTimeout( ID of setTimeout( ) );</p>
	
<p style="margin: 10px auto; " class="subContent">When using javascript timing methods you have to understand how javascript executes statements in time interval.</p>


<p style="font-weight:bold; color: darkgreen; background: inherit;" class=subTopic">The setTimeout( ) Method</p>

<p class="subSyntax">Syntax : </p>
	<p style="margin: 10px auto; padding:5px; border: 1px solid #ccc; display: block;background: #fbfbfb;" class="jsName">setTimeout( "JavaScript Statements", milliseconds );</p>

<p style="margin: 10px auto; "  class="subContent">The setTimeout( ) javascript timing method takes only two parameters : </p>

<p style="margin: 10px auto; padding:5px; border: 1px solid #ccc; display: block;background: #fbfbfb;" class="subParam"> <span style="color:#555; background: inherit;" class="params">first parameter:</span>  this parameter is the  javascript statements you want to execute. A string funciton name can also be pass to it.</p>

<p style="margin: 10px auto; padding:5px; border: 1px solid #ccc; display: block;background: #fbfbfb;" class="subParam"> 
<span style="color:#555; background: inherit;"  class="params"> second parameter: </span>
 specify the milliseconds it is going to take before executing the javascript statements in the first parameter. It can simply be referred to as "Delay On Execution"</p>

<p style="margin: 30px auto 20px auto; color: #555;"  class="example">Example 1.0 : Structure Of The setTimeout( ) Method: </p>

<code  style="line-height:2; border:1px solid darkgrey; padding:5px; margin: 20px auto; width: auto; height: auto; display:block; background: #fefefe; "  class="subCode"> 
<p class="subStructure">
 var setTime = setTimeout( function ( ) {
	// javascript statments
	}, 500 ); </p>
							
					<p class="subOr" >Or</p >
							
<p class="subStructure">var setTime = setTimeout( "setTimeFunction( )", 500 );</p>
</code>
	

<p style="margin: 30px auto 20px auto; color: #555; background: inherit; " class="example">Example 1.1 : Calculating Milliseconds:</p>

<p style="margin: 10px auto; " class="subContent">To work with the javascript timing methods, it's very necessary you understand how to calculate milliseconds.
</p>
		
<p class="msText">You have one seconds ( 1s ) in one thousand milliseconds ( 1000ms )</p>
		
<p style="font-weight:150;" class="msFormulae">Milliseconds Formulae</p> 

<code style="line-height:2; border:1px solid darkgrey; padding:5px; margin: 20px auto; width: auto; height: auto; display:block; background: #fefefe; " class="subCode">
<pre>1000ms = 1s
Yms = Xs
			
 if 1000s = 1s
 300s =	Xs
				
1000s * Xs = 300s * 1s
1000X = 300s
X = 300s / 1000s
X = 0.3s</pre> </code>

<p style="margin: 10px auto; " class="subContent">This means 300 milliseconds = 0.3 second, not up to one second (1s). It means your javascript statements will be executed in the time interval of 0.3s.</p>
		
		
<p style="margin: 30px auto 20px auto; color: #555;" class="example"> Example 1.2 :  Creating A Stop Watch</p>

You can achieve this task with the javascript timing methods.

<p style="margin: 20px auto10px auto; font-weight:bold; color:#333; background:inherit;" class="codeStructure">The Structure</p>

<p>You can use any of the following code structure : </p>
			
  <code style="line-height:2; border:1px solid darkgrey; padding:5px; margin: 20px auto; width: auto; height: auto; display:block; " class=codeStructure">
var clear;
		
function stopWatch( ) {
// javascript statement here
			
clear = setTimeout( "stopWatch( )", 1000 );
}
		
<p class="subOr">Or</p>
					
function stopWatch( ) { 
// javascript	statement here
		
clear = 
 setTimeout( function ( ) {
// javascript statement here
					 
  }, 1000 );
}
	
<p class="subOr">Or</p>
					
var stopWatch = function ( ) {
// javascript statement here
	
clear = 
 setTimeout( "stopWatch( )", 1000 );
} 
</code>
	
	
<p style="margin: 20px auto10px auto; font-weight:150;"  class="subScript">The Javascript Code 	: startwatch.js</p>

<code style="line-height:2; border:1px solid darkgrey; padding:5px; margin: 10px auto; width: auto; height: auto; display:block; "  class="code structure">

// initialize your variables outside the function 
var count = 0;
var clearTime;
var seconds = 0, minutes = 0, hours = 0;

<br/>
		
var check = 0, clearState;
		
var secs, mins, gethours ;

<br/>
		
function startWatch( ) {
			
/* check if seconds is equal to 60 and add a +1 to minutes, and set seconds to 0 */

<br/>
if ( seconds === 60 ) {
	seconds = 0;
	minutes = minutes + 1;
}
</br>

/* you use the javascript tenary operator to format how the minutes should look and add 0 to minutes if less than 10 */
mins = ( minutes < 10 ) ?	
( '0' + minutes + ': ' ) : ( minutes + ': ' );
			
			
/* check if minutes is equal to 60 and 
add a +1 to hours set minutes to 0 */
if ( minutes === 60 ) {
	minutes = 0;
	hours = hours + 1;
}
			
/* you use the javascript tenary operator
to format how the hours should look and 
add 0 to hours if less than 10 */
gethours = ( hours < 10 ) ?	
( '0' + hours + ': ' ) : ( hours + ': ' );

secs = ( seconds < 10 ) ?	
( '0' + seconds ) : ( seconds );
			
// display the stopwatch
var x = document.getElementById("timer");
x.innerHTML = 
        'Time:  ' + gethours + mins + secs;
			
/* call the seconds counter after displaying the stop watch and increment seconds by +1 to keep it counting
*/
seconds++;

/* call the setTimeout( ) to keep the 
stop watch alive ! */
clearTime = setTimeout( "startWatch( )", 1000 );
			
} // startWatch( )
		
		
//create a function to start the stop watch
function startTime( ) {

       
 /* check if seconds is equal to zero 
and start the stop watch */
	if ( seconds === 0 ) {

	/* hide the fulltime when the stop watch 
	is running */
	var fulltime = 
	   document.getElementById( "fulltime" );
	fulltime.style.display = "none";
			
	// hide the start button if the stop watch is
    running */
	this.style.display = "none";
	
	/* hide the play button if the stop watch
	is running */
	document.getElementById("play")
	.style.display = "none";

 
			
	/* call the startWatch( ) function to execute 
	the stop watch */
	startWatch( );
	}
			
}	// startTime( ) 


/* you need to call the startTime( ) function to keep the stop watch alive ! */

window.addEventListener( 'load', function ( ) {
	var start = document.getElementById("start");
        start.addEventListener('click', startTime );
});

// ********** startwatch.js end **************
</code>


<p style="margin: 10px auto;" class="subContent">To stop the timer, you need to call the clearTimeout( ) timing method and this come very handy </p>

<p style="font-weight:bold; color: darkgreen; background: inherit;" class="subTopic">The clearTimeout( ) Timing Method</p>
	
<p class="subContent">It takes just one parameter : the return ID of the setTimeout( )</p>
	
<p style="margin: 10px auto; "  class="subContent"> <span class="sunNotice">Note : </span> the setTimeout( ) timing method always return a value and that value is  to the ClearTimeout( ) timing method.</p>
	
<p  style="margin: 30px auto 20px auto; color: #555; background: inherit; " class="example">Example 1.3 : The ClearTimeout( ) Parameter</p>

	<p style="margin: 10px auto; padding:5px; border: 1px solid #ccc; display: block;background: #fbfbfb;"  class="jsName">var clearTime = setTimeout( "stopWatch( )", 100 );
	
<p class="subContent">clearTime variable is returned as a value by the setTimeout( ) timing 
	   method to be pass into the clearTimeout( ID ) as an ID to reference it :  clearTimeout( clearTime );	</p>


<p style="margin: 30px auto 20px auto; color: #555; background: inherit; " class="example">Example 1.4 : Stopping The Time - stopwatch.js </p>
	

<code style="line-height:2; border:1px solid darkgrey; padding:5px; margin: 10px auto; width: auto; height: auto; display:block; " class="subCode">

//stop the time
function stopTime( ) {

	/* check if seconds, minutes and 
	 hours are not equal to 0 */
	if ( seconds !== 0 
		|| minutes !== 0 
		|| hours !== 0 ) {
			
		/* display the full time before reseting
		the stop watch  */
		var fulltime = 
			document.getElementById( "fulltime" );
	
		//display the full time
		fulltime.style.display = "block";  
		fulltime.innerHTML = 'Fulltime:  ' + gethours + mins + secs;
					
		// reset 
the stop watch
		seconds = 0;
		minutes = 0;
		hours = 0;
				
		secs =  '0' + seconds;
		mins = '0' + minutes + ': ';
		gethours = '0' + hours + ': ';
					
		/* display the stopwatch after
		  it's been stopped
*/
		var x = document.getElementById("timer");
		x.innerHTML = gethours + mins + secs;
					
		/* display all the stop watch control 
		buttons */
		document.getElementById("start")
		  .style.display = "inline-block";
		  
		document.getElementById("stop")
		  .style.display = "inline-block";
		  
		document.getElementById("play")
		  .style.display = "inline-block";

         document.getElementById("pause")
            .style.display = "inline-block";
		

			/* clear the stop watch using the 
			setTimeout( ) return value 'clearTime' 
			as ID */
			clearTimeout( clearTime );

			}
		}
// stopTime( )


/* you need  to call the stopTime( ) function to terminate the stop watch */

window.addEventListener( 'load', function ( ) {

   var stop = document.getElementById("stop");
    stop.addEventListener('click', stopTime );
	
});

</code>

// ********** stopwatch.js end **************


<p class="subtopic">The CSS</p>

<code style="line-height:2; border:1px solid darkgrey; padding:5px; margin: 10px auto; width: auto; height: auto; display:block;" class="subCode">

#stopWatch {
	width: 280px;
	height: auto;
	text-align: center;
	display: block;
	padding: 5px;
	margin: 0 auto;
	}
	
	#timer, .fulltime {
		width: auto;
		height: auto;
		padding: 10px;
		display: block;
		border: 1px solid #eee;
		text-align: center;
		box-shadow: 0 0 5px #ccc;
		background: #fbfbf0;
		color: darkblue;
		border-bottom:4px solid darkgrey;
	}
	
	.fulltime { display: none; }

</code>


<p class="subtopic">The HTML </p>
<code style="line-height:2; border:1px solid darkgrey; padding:5px; margin: 10px auto; width: auto; height: auto; display:block; "  class="subTopic">

&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	lt;title&gt; Javascript Stop Watch &lt;/title&gt;
	
	&lt;style text="text/css"&gt;
	
	&lt;/style&gt;
	
	&lt;script src="startwatch.js" type="text/javascript"&gt; &lt;/script&gt;
	&lt;script src="stopwatch.js" type="text/javascript"&gt;  &lt;/script&gt;
	
&lt;/head&gt;

&lt; body &gt;

	&lt;section id="stopWatch"&gt;
		&lt;p id="timer"&gt ;Time : 00:00:00 &lt;/p&gt;
		
		&lt;button id="start"&gt;Start&lt;/button&gt;
		&lt;button id="stop"&gt; Stop &lt;/button&gt;
		
		&lt;p style="display:none; font-size:16px; font-weight:bold; id="fullTime"&gt; &lt;/p&gt;
	&lt;/section&gt;
	
&lt;/body&gt;
&lt;/html&gt;

</code>


<p style="margin: 10px auto;"  class="subContent">The stop watch is complete now. In the next version of this tutorial, you'll learn how to embed more effects, like adding a play and a pause button to control the time. </p>

<p style="margin: 10px auto;"  class="subNext">Javascript Stop Watch: 

 <a href="">Javascript Stop Watch - Adding Play and Pause Button 1.1 </a></p>


<p style="margin: 10px auto; line-height:2;"  class="subReadMore"> 
Read More about :
	<a style="display: block;" href=""> The Javascript Tenary Operator  - How It Works </a>

	<a style="display: block;" href="">Understanding The Javascript addEventListener( )</a>
</p>

		
